#! python

from util.run_tools import *
import time, os
from glob import glob

if __name__ == "__main__":
    
    args = sys.argv

    if len( args ) <= 1:
        print( 'Please specifiy the problem number to test.' )
        print( 'Ex. ./run 23' )
        exit()

    tests = args[1:]

    all = False
    if tests[0].lower() == 'all':
        tests = list( glob.glob('solutions/*.py' ))
        tests.sort()
        all = True

    answers = getAnswers()
    begin_tests = time.time()
    for test in tests:
        if not all:

            pe_problem = ProjectEuler( test = test )

            if pe_problem.validateTest():
                pe_problem.padTestPath()
                pe_problem.test_path = f'solutions/{pe_problem.test}.py'
                pe_problem.getMyAnswer()

        else:
            test_path = test
            test = re.search( r'[\\/](\d{3}).py', test_path ).groups(1)[0]
            pe_problem = ProjectEuler( test = test, test_path = test_path )

        pe_problem.getAnswer( answers )

        pe_problem.getMyAnswer()

        pe_problem.processTest()



        if pe_problem.my_answer is None:
            log( test, 'Failure', 'Failure', pe_problem.duration, begin_tests )
        else:
            log( test, 'Completed', pe_problem.passed, pe_problem.duration, begin_tests )



